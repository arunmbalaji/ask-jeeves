{"version":3,"sources":["detach/IosLocalization.js"],"names":["async","supportingDirectory","context","let","locales","type","await","getResolvedLocalesAsync","config","undefined","lang","localizationObj","Object","entries","dir","path","join","mkdirp","sync","strings","buffer","plistKey","localVersion","push","fs","writeFile","writeLocalizationResourcesAsync"],"mappings":";;;;;;;;+BAKOA,WAA+C,EAAEC,mBAAF,EAAuBC,OAAvB,EAA/CF,EAAiF;AACtFG,QAAIC,UAAU,EAAdD;AACA,QAAID,QAAQG,IAARH,KAAiB,MAArB,EAA6B;AAC3BE,gBAAUE,MAAMC,uEAAwBL,QAAQM,MAAhCD,CAAhBH;AACF,KAFA,MAEO,IAAIF,QAAQG,IAARH,KAAiB,SAArB,EAAgC;AACrCE,gBAAUF,QAAQM,MAARN,CAAeE,OAAfF,KAA2BO,SAA3BP,GAAuCA,QAAQM,MAARN,CAAeE,OAAtDF,GAAgE,EAA1EE;AACF;AACA,SAAK,MAAM,CAACM,IAAD,EAAOC,eAAP,CAAX,IAAsCC,OAAOC,OAAPD,CAAeR,OAAfQ,CAAtC,EAA+D;AAC7D,YAAME,MAAMC,cAAKC,IAALD,CAAUd,mBAAVc,EAAgC,GAAEL,IAAK,QAAvCK,CAAZ;AACAE,0CAAOC,IAAPD,CAAYH,GAAZG;AACA,YAAME,UAAUJ,cAAKC,IAALD,CAAUD,GAAVC,EAAe,mBAAfA,CAAhB;AACA,YAAMK,SAAS,EAAf;AACA,WAAK,MAAM,CAACC,QAAD,EAAWC,YAAX,CAAX,IAAuCV,OAAOC,OAAPD,CAAeD,eAAfC,CAAvC,EAAwE;AACtEQ,eAAOG,IAAPH,CAAa,GAAEC,QAAS,OAAMC,YAAa,IAA3CF;AACF;AACAd,YAAMkB,sCAAGC,SAAHD,CAAaL,OAAbK,EAAsBJ,OAAOJ,IAAPI,CAAY,IAAZA,CAAtBI,CAANlB;AACF;AACF,G;;kBAjBsBoB,+B;;;;;;;AALtB;AAAA;AAAA;;AACA;;;;AACA;AAAA;AAAA;;;;AACA;AAAA;AAAA","file":"../../detach/IosLocalization.js","sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport mkdirp from 'mkdirp';\nimport { getResolvedLocalesAsync } from './ExponentTools';\n\nexport async function writeLocalizationResourcesAsync({ supportingDirectory, context }) {\n  let locales = {};\n  if (context.type === 'user') {\n    locales = await getResolvedLocalesAsync(context.config);\n  } else if (context.type === 'service') {\n    locales = context.config.locales !== undefined ? context.config.locales : {};\n  }\n  for (const [lang, localizationObj] of Object.entries(locales)) {\n    const dir = path.join(supportingDirectory, `${lang}.lproj`);\n    mkdirp.sync(dir);\n    const strings = path.join(dir, 'InfoPlist.strings');\n    const buffer = [];\n    for (const [plistKey, localVersion] of Object.entries(localizationObj)) {\n      buffer.push(`${plistKey} = \"${localVersion}\";`);\n    }\n    await fs.writeFile(strings, buffer.join('\\n'));\n  }\n}\n"],"sourceRoot":"/xdl/src"}